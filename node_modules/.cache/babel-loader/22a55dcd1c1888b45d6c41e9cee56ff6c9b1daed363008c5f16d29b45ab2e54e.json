{"ast":null,"code":"var _jsxFileName = \"/Users/mikejabrhamdan/grides-react-app/src/components/Step2.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useLocation } from 'react-router-dom'; // Import useLocation\nimport './App.css';\nimport moment from 'moment';\n\n// Define defaultFilters before using it\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultFilters = {\n  tripPrice: {\n    min: 0,\n    max: 1000\n  },\n  vehicleType: 'All',\n  fuelType: 'All',\n  transmission: 'All'\n};\nfunction safeDateFormat(dateInput) {\n  if (!dateInput) {\n    console.error('Date input is undefined, null, or empty');\n    return 'Invalid Date';\n  }\n  const date = new Date(dateInput);\n\n  // Check if the date is valid\n  if (isNaN(date.getTime())) {\n    console.error('Invalid date:', dateInput);\n    return 'Invalid Date';\n  }\n\n  // If the date is valid, format it\n  const options = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true\n  };\n  return new Intl.DateTimeFormat('en-US', options).format(date).replace(/^0/, ''); // Remove leading zero in hours for 1-9\n}\nconst formatDate = dateString => {\n  if (!dateString) return 'Invalid Date'; // Handle null, undefined, or empty string more safely\n\n  const date = new Date(dateString);\n  if (isNaN(date.getTime())) {\n    return 'Invalid Date'; // Return 'Invalid Date' if the date is not valid\n  }\n  const options = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true\n  };\n  return new Intl.DateTimeFormat('en-US', options).format(date).replace(/^0/, ''); // Remove leading zero in hours for 1-9\n};\nfunction validateAndFormatDate(dateString) {\n  if (!dateString) return ''; // Handle null, undefined, or empty string\n\n  const date = moment(dateString);\n  if (!date.isValid()) {\n    console.error('Invalid date:', dateString);\n    return ''; // Return an empty string or handle as needed\n  }\n  return date.format('YYYY-MM-DD HH:mm:ss');\n}\nconst Step2 = () => {\n  _s();\n  const [pickupLocation, setPickupLocation] = useState(localStorage.getItem('pickupLocation') || '');\n  const [returnLocation, setReturnLocation] = useState(localStorage.getItem('selectedAddress') || ''); // Updated to use selectedAddress from local storage\n  const location = useLocation();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [vehicles, setVehicles] = useState([]);\n  const [filter, setFilter] = useState('');\n  const [filters, setFilters] = useState(defaultFilters);\n  const [currentPrice, setCurrentPrice] = useState(0); // Placeholder, will be updated\n  const [maxPrice, setMaxPrice] = useState(10000); // Placeholder, will be updated\n  const [filteredVehicles, setFilteredVehicles] = useState([]); // State to hold filtered vehicles\n  const [finalReturnLocation, setFinalReturnLocation] = useState(localStorage.getItem('finalReturnLocation') || '');\n  const [dateFrom, setDateFrom] = useState(localStorage.getItem('dateFrom') || '');\n  const [dateTo, setDateTo] = useState(localStorage.getItem('dateTo') || '');\n  const calculateDuration = () => {\n    const from = new Date(localStorage.getItem('dateFrom'));\n    const to = new Date(localStorage.getItem('dateTo'));\n    return Math.round((to - from) / (1000 * 60 * 60 * 24));\n  };\n  const [reservationDuration, setReservationDuration] = useState(calculateDuration());\n  function generateDescription(vehicle) {\n    const descriptors = [\"Experience ultimate driving comfort with\", \"Elevate your journey with the sophisticated\", \"Turn heads in the sleek and stylish\", \"Embrace the road ahead with unparalleled performance of\", \"Discover the perfect blend of luxury and efficiency in\"];\n    const uniqueIdentifier = `${vehicle.brand} ${vehicle.mark} ${vehicle.year}`;\n    const randomIndex = Math.floor(Math.random() * descriptors.length);\n    const baseDescription = descriptors[randomIndex];\n    const uniquenessFactor = vehicle.color ? `in its stunning ${vehicle.color.title} color` : `with its unique charm`;\n    return `${baseDescription} the ${uniqueIdentifier} ${uniquenessFactor}.`;\n  }\n  const filterVehiclesByPrice = () => {\n    const filtered = vehicles.filter(vehicle => {\n      const totalPrice = vehicle.price * reservationDuration;\n      return totalPrice <= currentPrice;\n    });\n    setFilteredVehicles(filtered);\n  };\n  useEffect(() => {\n    const fetchVehicles = async () => {\n      setLoading(true);\n      try {\n        const token = localStorage.getItem('token'); // Assuming you store the token in localStorage\n\n        const storedDateFrom = localStorage.getItem('dateFrom');\n        const storedDateTo = localStorage.getItem('dateTo'); // Retrieve dateTo if needed\n\n        const formattedDateFrom = storedDateFrom ? validateAndFormatDate(storedDateFrom) : '';\n        const formattedDateTo = storedDateTo ? validateAndFormatDate(storedDateTo) : '';\n        const queryParams = new URLSearchParams({\n          date_from: formattedDateFrom,\n          date_to: formattedDateTo,\n          pickup_location: pickupLocation,\n          return_location: returnLocation // Add the customAddress as return_location\n        });\n        const response = await axios.get(`https://calm-retreat-90846-cd036e8a822e.herokuapp.com/https://api.rentsyst.com/v2/booking/search?${queryParams.toString()}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const vehicleCatalog = response.data.vehicles.map(vehicle => ({\n          id: vehicle.id,\n          brand: vehicle.brand,\n          mark: vehicle.mark,\n          year: vehicle.year,\n          thumbnail: vehicle.thumbnail,\n          price: vehicle.price,\n          totalPrice: vehicle.price * reservationDuration,\n          description: generateDescription(vehicle),\n          topFeatures: vehicle.top_features\n        }));\n        setVehicles(vehicleCatalog); // Adjust according to your API response structure\n        setFilteredVehicles(vehicleCatalog); // Ensure all vehicles show up when the page loads\n\n        // Calculate and set the maximum trip price\n        const maxTripPrice = Math.max(...vehicleCatalog.map(v => v.totalPrice));\n        setMaxPrice(maxTripPrice);\n        setCurrentPrice(maxTripPrice); // Set the slider to the maximum trip price by default\n      } catch (error) {\n        console.error('Failed to fetch vehicles:', error);\n        setError('Failed to fetch available vehicles. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (returnLocation) {\n      // Ensure we have a return location before fetching\n      fetchVehicles();\n    }\n  }, [pickupLocation, returnLocation]); // Depend on pickupLocation and returnLocation to refetch when they change\n\n  const resetFilters = () => {\n    setFilter('');\n    setFilters(defaultFilters);\n    setCurrentPrice(maxPrice); // Reset to maxPrice when filters are reset\n  };\n  useEffect(() => {\n    filterVehiclesByPrice();\n  }, [currentPrice, vehicles, reservationDuration]);\n  const handleTripPriceChange = event => {\n    setCurrentPrice(Number(event.target.value));\n  };\n  const reserveNow = vehicleId => {\n    console.log(`Reserve vehicle with ID: ${vehicleId}`);\n  };\n  useEffect(() => {\n    localStorage.setItem('finalReturnLocation', finalReturnLocation);\n    localStorage.setItem('dateFrom', dateFrom);\n    localStorage.setItem('dateTo', dateTo);\n  }, [finalReturnLocation, dateFrom, dateTo]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-bar\",\n      style: {\n        position: 'relative',\n        paddingTop: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/logo.png\",\n        alt: \"Logo\",\n        className: \"logo\",\n        style: {\n          position: 'absolute',\n          top: '50px',\n          left: '10px',\n          marginTop: '0'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reservation-details\",\n        style: {\n          marginLeft: '120px',\n          marginTop: '20px',\n          display: 'flex',\n          alignItems: 'center',\n          color: '#eac831'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Location: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: pickupLocation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Date From: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: safeDateFormat(dateFrom)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Date To: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: safeDateFormat(dateTo)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Duration: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"detail-value\",\n            children: [reservationDuration, \" days\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"catalog-container\",\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        paddingTop: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vehicle-list\",\n        style: {\n          zIndex: 9999,\n          width: 'calc(100% - 320px)',\n          height: '100%',\n          overflowY: 'auto',\n          overflowX: 'hidden',\n          msOverflowStyle: 'none',\n          scrollbarWidth: 'none',\n          marginTop: '20px'\n        },\n        children: [loading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading available vehicles...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 23\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this), !loading && !error && filteredVehicles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vehicle-grid\",\n          children: filteredVehicles.map(vehicle => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"vehicle-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: vehicle.thumbnail,\n                alt: `${vehicle.brand} ${vehicle.mark}`,\n                className: \"vehicle-thumbnail\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"vehicle-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: `${vehicle.brand} ${vehicle.mark} ${vehicle.year}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"vehicle-description-container\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"vehicle-description\",\n                    children: vehicle.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"price-info\",\n                  style: {\n                    color: '#eac831'\n                  },\n                  children: [\"Daily Price: $\", vehicle.price, \" | Trip Price: $\", vehicle.totalPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"reserve-button\",\n                  onClick: () => reserveNow(vehicle.id),\n                  style: {\n                    backgroundColor: '#eac831',\n                    color: 'black'\n                  },\n                  children: \"Reserve Now\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 21\n              }, this)]\n            }, vehicle.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar\",\n        style: {\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Filter by brand or model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Enter brand or model\",\n            value: filter,\n            onChange: e => setFilter(e.target.value),\n            className: \"filter-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Vehicle Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filters.vehicleType,\n            onChange: e => setFilters({\n              ...filters,\n              vehicleType: e.target.value\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"All\",\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Sedan\",\n              children: \"Sedan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"SUV\",\n              children: \"SUV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Truck\",\n              children: \"Truck\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Fuel Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filters.fuelType,\n            onChange: e => setFilters({\n              ...filters,\n              fuelType: e.target.value\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"All\",\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Gasoline\",\n              children: \"Gasoline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Diesel\",\n              children: \"Diesel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Transmission\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filters.transmission,\n            onChange: e => setFilters({\n              ...filters,\n              transmission: e.target.value\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"All\",\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Automatic\",\n              children: \"Automatic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Manual\",\n              children: \"Manual\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Max Trip Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0\",\n            max: maxPrice,\n            value: currentPrice,\n            onChange: handleTripPriceChange,\n            step: \"10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-label\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"$\", currentPrice]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reset-filter\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: resetFilters,\n            children: \"Reset Filters\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n};\n_s(Step2, \"w63Tlx2Y6Usu1kMu4aRVEqZxfOc=\", false, function () {\n  return [useLocation];\n});\n_c = Step2;\nexport default Step2;\nvar _c;\n$RefreshReg$(_c, \"Step2\");","map":{"version":3,"names":["React","useState","useEffect","axios","useLocation","moment","jsxDEV","_jsxDEV","defaultFilters","tripPrice","min","max","vehicleType","fuelType","transmission","safeDateFormat","dateInput","console","error","date","Date","isNaN","getTime","options","year","month","day","hour","minute","hour12","Intl","DateTimeFormat","format","replace","formatDate","dateString","validateAndFormatDate","isValid","Step2","_s","pickupLocation","setPickupLocation","localStorage","getItem","returnLocation","setReturnLocation","location","loading","setLoading","setError","vehicles","setVehicles","filter","setFilter","filters","setFilters","currentPrice","setCurrentPrice","maxPrice","setMaxPrice","filteredVehicles","setFilteredVehicles","finalReturnLocation","setFinalReturnLocation","dateFrom","setDateFrom","dateTo","setDateTo","calculateDuration","from","to","Math","round","reservationDuration","setReservationDuration","generateDescription","vehicle","descriptors","uniqueIdentifier","brand","mark","randomIndex","floor","random","length","baseDescription","uniquenessFactor","color","title","filterVehiclesByPrice","filtered","totalPrice","price","fetchVehicles","token","storedDateFrom","storedDateTo","formattedDateFrom","formattedDateTo","queryParams","URLSearchParams","date_from","date_to","pickup_location","return_location","response","get","toString","headers","Authorization","vehicleCatalog","data","map","id","thumbnail","description","topFeatures","top_features","maxTripPrice","v","resetFilters","handleTripPriceChange","event","Number","target","value","reserveNow","vehicleId","log","setItem","children","className","style","position","paddingTop","src","alt","top","left","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","display","alignItems","justifyContent","zIndex","width","height","overflowY","overflowX","msOverflowStyle","scrollbarWidth","onClick","backgroundColor","type","placeholder","onChange","e","step","_c","$RefreshReg$"],"sources":["/Users/mikejabrhamdan/grides-react-app/src/components/Step2.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useLocation } from 'react-router-dom'; // Import useLocation\nimport './App.css';\nimport moment from 'moment';\n\n// Define defaultFilters before using it\nconst defaultFilters = {\n  tripPrice: { min: 0, max: 1000 },\n  vehicleType: 'All',\n  fuelType: 'All',\n  transmission: 'All',\n};\n\nfunction safeDateFormat(dateInput) {\n  if (!dateInput) {\n    console.error('Date input is undefined, null, or empty');\n    return 'Invalid Date';\n  }\n\n  const date = new Date(dateInput);\n\n  // Check if the date is valid\n  if (isNaN(date.getTime())) {\n    console.error('Invalid date:', dateInput);\n    return 'Invalid Date';\n  }\n\n  // If the date is valid, format it\n  const options = { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: '2-digit', hour12: true };\n  return new Intl.DateTimeFormat('en-US', options).format(date).replace(/^0/, ''); // Remove leading zero in hours for 1-9\n}\n\nconst formatDate = (dateString) => {\n  if (!dateString) return 'Invalid Date'; // Handle null, undefined, or empty string more safely\n\n  const date = new Date(dateString);\n  if (isNaN(date.getTime())) {\n    return 'Invalid Date'; // Return 'Invalid Date' if the date is not valid\n  }\n  const options = { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: '2-digit', hour12: true };\n  return new Intl.DateTimeFormat('en-US', options).format(date).replace(/^0/, ''); // Remove leading zero in hours for 1-9\n};\n\n\nfunction validateAndFormatDate(dateString) {\n  if (!dateString) return ''; // Handle null, undefined, or empty string\n\n  const date = moment(dateString);\n  if (!date.isValid()) {\n    console.error('Invalid date:', dateString);\n    return ''; // Return an empty string or handle as needed\n  }\n\n  return date.format('YYYY-MM-DD HH:mm:ss');\n}\n\nconst Step2 = () => {\n  const [pickupLocation, setPickupLocation] = useState(localStorage.getItem('pickupLocation') || '');\n  const [returnLocation, setReturnLocation] = useState(localStorage.getItem('selectedAddress') || ''); // Updated to use selectedAddress from local storage\n  const location = useLocation();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [vehicles, setVehicles] = useState([]);\n  const [filter, setFilter] = useState('');\n  const [filters, setFilters] = useState(defaultFilters);\n  const [currentPrice, setCurrentPrice] = useState(0); // Placeholder, will be updated\n  const [maxPrice, setMaxPrice] = useState(10000); // Placeholder, will be updated\n  const [filteredVehicles, setFilteredVehicles] = useState([]); // State to hold filtered vehicles\n  const [finalReturnLocation, setFinalReturnLocation] = useState(localStorage.getItem('finalReturnLocation') || '');\n  const [dateFrom, setDateFrom] = useState(localStorage.getItem('dateFrom') || '');\n  const [dateTo, setDateTo] = useState(localStorage.getItem('dateTo') || '');\n  const calculateDuration = () => {\n    const from = new Date(localStorage.getItem('dateFrom'));\n    const to = new Date(localStorage.getItem('dateTo'));\n    return Math.round((to - from) / (1000 * 60 * 60 * 24));\n  };\n  const [reservationDuration, setReservationDuration] = useState(calculateDuration());\n\n  function generateDescription(vehicle) {\n    const descriptors = [\n      \"Experience ultimate driving comfort with\",\n      \"Elevate your journey with the sophisticated\",\n      \"Turn heads in the sleek and stylish\",\n      \"Embrace the road ahead with unparalleled performance of\",\n      \"Discover the perfect blend of luxury and efficiency in\",\n    ];\n    const uniqueIdentifier = `${vehicle.brand} ${vehicle.mark} ${vehicle.year}`;\n    const randomIndex = Math.floor(Math.random() * descriptors.length);\n    const baseDescription = descriptors[randomIndex];\n    const uniquenessFactor = vehicle.color ? `in its stunning ${vehicle.color.title} color` : `with its unique charm`;\n\n    return `${baseDescription} the ${uniqueIdentifier} ${uniquenessFactor}.`;\n  }\n\n  const filterVehiclesByPrice = () => {\n    const filtered = vehicles.filter(vehicle => {\n      const totalPrice = vehicle.price * reservationDuration;\n      return totalPrice <= currentPrice;\n    });\n    setFilteredVehicles(filtered);\n  };\n\n  useEffect(() => {\n    const fetchVehicles = async () => {\n      setLoading(true);\n      try {\n        const token = localStorage.getItem('token'); // Assuming you store the token in localStorage\n        \n        const storedDateFrom = localStorage.getItem('dateFrom');\n        const storedDateTo = localStorage.getItem('dateTo'); // Retrieve dateTo if needed\n\n        const formattedDateFrom = storedDateFrom ? validateAndFormatDate(storedDateFrom) : '';\n        const formattedDateTo = storedDateTo ? validateAndFormatDate(storedDateTo) : '';\n        \n        const queryParams = new URLSearchParams({\n          date_from: formattedDateFrom,\n          date_to: formattedDateTo,\n          pickup_location: pickupLocation,\n          return_location: returnLocation, // Add the customAddress as return_location\n        });\n\n        const response = await axios.get(`https://calm-retreat-90846-cd036e8a822e.herokuapp.com/https://api.rentsyst.com/v2/booking/search?${queryParams.toString()}`, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        const vehicleCatalog = response.data.vehicles.map(vehicle => ({\n          id: vehicle.id,\n          brand: vehicle.brand,\n          mark: vehicle.mark,\n          year: vehicle.year,\n          thumbnail: vehicle.thumbnail,\n          price: vehicle.price,\n          totalPrice: vehicle.price * reservationDuration,\n          description: generateDescription(vehicle),\n          topFeatures: vehicle.top_features\n        }));\n        setVehicles(vehicleCatalog); // Adjust according to your API response structure\n        setFilteredVehicles(vehicleCatalog); // Ensure all vehicles show up when the page loads\n\n        // Calculate and set the maximum trip price\n        const maxTripPrice = Math.max(...vehicleCatalog.map(v => v.totalPrice));\n        setMaxPrice(maxTripPrice);\n        setCurrentPrice(maxTripPrice); // Set the slider to the maximum trip price by default\n      } catch (error) {\n        console.error('Failed to fetch vehicles:', error);\n        setError('Failed to fetch available vehicles. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n  \n    if (returnLocation) { // Ensure we have a return location before fetching\n      fetchVehicles();\n    }\n  }, [pickupLocation, returnLocation]); // Depend on pickupLocation and returnLocation to refetch when they change\n\n  const resetFilters = () => {\n    setFilter('');\n    setFilters(defaultFilters);\n    setCurrentPrice(maxPrice); // Reset to maxPrice when filters are reset\n  };\n\n  useEffect(() => {\n    filterVehiclesByPrice();\n  }, [currentPrice, vehicles, reservationDuration]);\n\n  const handleTripPriceChange = (event) => {\n    setCurrentPrice(Number(event.target.value));\n  };\n\n  const reserveNow = (vehicleId) => {\n    console.log(`Reserve vehicle with ID: ${vehicleId}`);\n  };\n\n  useEffect(() => {\n    localStorage.setItem('finalReturnLocation', finalReturnLocation);\n    localStorage.setItem('dateFrom', dateFrom);\n    localStorage.setItem('dateTo', dateTo);\n  }, [finalReturnLocation, dateFrom, dateTo]);\n\n  return (\n    <div>\n      <div className=\"top-bar\" style={{ position: 'relative', paddingTop: '20px' }}>\n        <img src=\"/logo.png\" alt=\"Logo\" className=\"logo\" style={{ position: 'absolute', top: '50px', left: '10px', marginTop: '0' }} />\n        <div className=\"reservation-details\" style={{ marginLeft: '120px', marginTop: '20px', display: 'flex', alignItems: 'center', color: '#eac831' }}>\n          <p>Location: <span className=\"detail-value\">{pickupLocation}</span></p>\n          <p>Date From: <span className=\"detail-value\">{safeDateFormat(dateFrom)}</span></p>\n          <p>Date To: <span className=\"detail-value\">{safeDateFormat(dateTo)}</span></p>\n          <p>Duration: <span className=\"detail-value\">{reservationDuration} days</span></p>\n        </div>\n      </div>\n      <div className=\"catalog-container\" style={{ display: 'flex', justifyContent: 'space-between', paddingTop: '20px' }}>\n        <div className=\"vehicle-list\" style={{ zIndex: 9999, width: 'calc(100% - 320px)', height: '100%', overflowY: 'auto', overflowX: 'hidden', msOverflowStyle: 'none', scrollbarWidth: 'none', marginTop: '20px' }}>\n          {loading && <p>Loading available vehicles...</p>}\n          {error && <p>{error}</p>}\n          {!loading && !error && filteredVehicles.length > 0 && (\n            <div className=\"vehicle-grid\">\n              {filteredVehicles.map((vehicle) => {\n                return (\n                  <div key={vehicle.id} className=\"vehicle-item\">\n                    <img src={vehicle.thumbnail} alt={`${vehicle.brand} ${vehicle.mark}`} className=\"vehicle-thumbnail\" />\n                    <div className=\"vehicle-info\">\n                      <h3>{`${vehicle.brand} ${vehicle.mark} ${vehicle.year}`}</h3>\n                      <div className=\"vehicle-description-container\">\n                        <p className=\"vehicle-description\">{vehicle.description}</p>\n                      </div>\n                      <p className=\"price-info\" style={{ color: '#eac831' }}>Daily Price: ${vehicle.price} | Trip Price: ${vehicle.totalPrice}</p>\n                      <button className=\"reserve-button\" onClick={() => reserveNow(vehicle.id)} style={{ backgroundColor: '#eac831', color: 'black' }}>Reserve Now</button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n        <div className=\"sidebar\" style={{ marginTop: '20px' }}>\n          <div className=\"filter-section\">\n            <h3>Filter by brand or model</h3>\n            <input\n              type=\"text\"\n              placeholder=\"Enter brand or model\"\n              value={filter}\n              onChange={e => setFilter(e.target.value)}\n              className=\"filter-input\"\n            />\n          </div>\n          <div className=\"filter-section\">\n            <h3>Vehicle Type</h3>\n            <select\n              value={filters.vehicleType}\n              onChange={e => setFilters({ ...filters, vehicleType: e.target.value })}\n            >\n              <option value=\"All\">All</option>\n              <option value=\"Sedan\">Sedan</option>\n              <option value=\"SUV\">SUV</option>\n              <option value=\"Truck\">Truck</option>\n            </select>\n          </div>\n          <div className=\"filter-section\">\n            <h3>Fuel Type</h3>\n            <select\n              value={filters.fuelType}\n              onChange={e => setFilters({ ...filters, fuelType: e.target.value })}\n            >\n              <option value=\"All\">All</option>\n              <option value=\"Gasoline\">Gasoline</option>\n              <option value=\"Diesel\">Diesel</option>\n            </select>\n          </div>\n          <div className=\"filter-section\">\n            <h3>Transmission</h3>\n            <select\n              value={filters.transmission}\n              onChange={e => setFilters({ ...filters, transmission: e.target.value })}\n            >\n              <option value=\"All\">All</option>\n              <option value=\"Automatic\">Automatic</option>\n              <option value=\"Manual\">Manual</option>\n            </select>\n          </div>\n          <div className=\"filter-section\">\n            <h3>Max Trip Price</h3>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max={maxPrice}\n              value={currentPrice}\n              onChange={handleTripPriceChange}\n              step=\"10\"\n            />\n            <div className=\"price-label\">\n              <span>${currentPrice}</span>\n            </div>\n          </div>\n          <div className=\"reset-filter\">\n            <button onClick={resetFilters}>Reset Filters</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Step2;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}